mixin filterTab(tab, link)
  li
    a(
      class=$view === tab.toLowerCase() ? 'selected' : ''
      href='#/' + link
    )= tab

section.todoapp

  header.header
    h1 todos
    input.new-todo(placeholder="What needs to be done?" autofocus)

  if todos.length
    section.main
      input.toggle-all(type="checkbox")
      label(htmlFor="toggle-all") Mark all as complete
      ul.todo-list
        for todo in $component.helpers.filteredTodos()
          li(class=todo.completed ? 'completed' : todo.id === editing ? 'editing' : '')
            .view(attributes={'data-tid': todo.id})
              input.toggle(type="checkbox" checked=todo.completed)
              label(ondblclick=$component.handlers.editTodo)= todo.text
              button.destroy(onclick=$component.handlers.deleteTodo)
            input.edit(value=todo.text)

    footer.footer
      span.todo-count
        - itemsLeft = todos.filter(t => !t.completed).length
        strong= String(itemsLeft)
        | #{' item' + (itemsLeft === 1 ? '' : 's') + ' left'}
      ul.filters
        +filterTab('All',       ''         )
        +filterTab('Active',    'active'   )
        +filterTab('Completed', 'completed')

      if todos.filter(t => t.completed).length
        button.clear-completed Clear completed
