mixin filterTab(tab, link)
  li
    a(
      class=$view === tab.toLowerCase() ? 'selected' : ''
      href='#/' + link
    )= tab

section.todoapp

  header.header
    h1 todos
    input.new-todo(
      autofocus
      onkeyup=$helpers.newTodoKeyup
      placeholder="What needs to be done?"
    )

  if todos.length
    section.main
      input.toggle-all(
        type="checkbox"
        checked=!todos.filter(t => !t.completed).length
        onchange=$helpers.changeAll
      )
      label(htmlFor="toggle-all") Mark all as complete
      ul.todo-list
        for todo in $helpers.filteredTodos()
          div= $component.child('todo-item', {attributes: {'data-tid': todo.id}})

    footer.footer
      span.todo-count
        - itemsLeft = todos.filter(t => !t.completed).length
        strong= String(itemsLeft)
        | #{' item' + (itemsLeft === 1 ? '' : 's') + ' left'}
      ul.filters
        +filterTab('All',       ''         )
        +filterTab('Active',    'active'   )
        +filterTab('Completed', 'completed')

      if todos.filter(t => t.completed).length
        button.clear-completed(onclick=$helpers.clearCompleted) Clear completed
